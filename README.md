# file-checker-adf
Azure Data Factory configuration for File Checker

The data sets, linked services, pipeline and trigger were created through visual coding in Azure. Azure checks code directly into a feature branch in GitHub. An approved pull request moves the code to the *master* branch. The publish function in Azure Data Factory transforms the json files into an AzureRM template and checks it into the *adf_publish* branch. This triggers a pipeline in Azure DevOps.

In the *master* branch, I added the file **arm-template-parameters-definition.json**. This allows me to override the default parameters list.

_Reference_: https://docs.microsoft.com/en-us/azure/data-factory/continuous-integration-deployment

In the *adf_publish* branch, Azure DevOps added the file **azure-pipelines.yml**. It adds a trigger on checkin in the *adf_publish* branch. Build and deploy run on a Linux VM. Build is a simple copy to the artifact folder. Deploy has 3 steps:
* Download the artifacts locally.
* Deploy the AzureRM template. This task references the template and parameters file generated by data factory. Some parameters are overriden with values from a variable group.
* Run an inline PowerShell script (PowerShell Core since we're running on a Linux VM) to start the data factory trigger - there is no property in the AzureRM template to do that.

_References_:
- https://docs.microsoft.com/en-us/azure/devops/pipelines/tasks/deploy/azure-resource-group-deployment?view=azure-devops
- https://docs.microsoft.com/en-us/azure/devops/pipelines/tasks/deploy/azure-powershell?view=azure-devops
